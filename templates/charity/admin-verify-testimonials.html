{% extends "charity/header.html" %}
{% block content %}
<div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a href="{% url 'admin-verify-request' %}">Request Verify</a>
    <a href="{% url 'admin-verify-ngo' %}">Ngo Verify</a>
    <a href="{% url 'admin-verify-testimonial' %}">Testimonial Verify</a>
  </div>
  <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; </span>
<div id="main">
  <input class="form-control" id="tableSearch" type="text" placeholder="Search" style="width: 200px;">
  <table class="table table-bordered table-striped mb-5">
    <thead>
        <tr>
            <th>SN</th>
            <th>Name</th>
            <th>Profession</th>
            <th>Review Message</th>
            <th>Donated to</th>
            <th>Image</th>
            <th>Verify (Y/N) ?</th>
        </tr>
    </thead>
    <tbody id="myTable">
      <tr>
          {% for d in data %}
            <td>{{forloop.counter}}</td>
            <td>{{d.name}}</td>
            <td>{{d.profession}}</td>
            <td>{{d.review_message}}</td>
            <td>{{d.donated_to}}</td>
            <td><a href="{{ d.image.url }}" class="btn btn-outline-dark" target="blank">Profile</a></td>
            <td>
              {% if d.verification_status is None %}
                  <a href="{% url 'testimonial_verified_as_true' d.id %}" class="mr-2 ml-2"><button class="btn btn-outline-success"><i class="fas fa-check-square"></i></button></a>
                  <a href="{% url 'testimonial_verified_as_false' d.id %}"><button class="btn btn-outline-danger"><i class="fas fa-times-circle"></i></button></a>
              {% elif d.verification_status is True %}
                  <button class="btn btn-outline-success"><i class="fas fa-check-square"></i></button>
              {% elif d.verification_status is False %}
                  <button class="btn btn-outline-danger"><i class="fas fa-times-circle"></i></button>
              {% endif %}
          </td> 
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
<script>
function openNav() {
  document.getElementById("mySidenav").style.width = "250px";
  document.getElementById("main").style.marginLeft = "250px";
  document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
  document.getElementById("main").style.marginLeft= "0";
  document.body.style.backgroundColor = "white";
}
//This is the search in the admin table
$(document).ready(function(){
  $("#tableSearch").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>
{% endblock content %}